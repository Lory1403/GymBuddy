import{_ as p,l as u,i as d,o as n,c as r,a as s,F as h,g as _,t as c}from"./index-022deeac.js";const g={}.VITE_API_HOST||"http://localhost:8080",f=g+"/api/v1",m={data(){return{palestre:[],position:null,distanze:[]}},methods:{getPalestre(){fetch(f+"/palestre",{method:"GET",headers:{"Content-Type":"application/json","x-access-token":u.token,latitude:this.position.coords.latitude,longitude:this.position.coords.longitude}}).then(async e=>{let t=await Promise.resolve(e.json());this.palestre=t.palestre,this.distanze=t.distanze}).catch(e=>console.error(e))},getIndirizzo(e){let t="";return e.via&&(t+=e.via),e.numeroCivico&&(t+=" "+e.numeroCivico+","),e.cap&&(t+=" "+e.cap),e.citta&&(t+=" "+e.citta),e.provincia&&(t+=" "+e.provincia),e.paese&&(t+=" "+e.paese),t},getDistanza(e){let t=this.distanze.map(o=>{if(o.id==e)return o});return Number(t[0].distanza.toFixed(2))},getLocation(){navigator.geolocation?navigator.geolocation.getCurrentPosition(this.showPosition,this.showError):alert("La geolocalizzazione non è supportata da questo browser.")},showPosition(e){this.position=e,this.getPalestre()},showError(e){switch(e.code){case e.PERMISSION_DENIED:alert("L'autorizzazione alla geolocalizzazione è stata negata dall'utente.");break;case e.POSITION_UNAVAILABLE:alert("Le informazioni sulla posizione non sono disponibili.");break;case e.TIMEOUT:alert("La richiesta per ottenere la posizione dell'utente è scaduta.");break;case e.UNKNOWN_ERROR:alert("Si è verificato un errore sconosciuto.");break}},esplora(e){this.$router.push("/palestre/"+e)},redirect(){this.$router.push("/")}},created(){d()&&this.redirect(),this.getLocation()}},v={class:"page"},b=s("h2",null,"Ecco le palestre vicino a te!",-1),E={class:"gym-list d-flex align-self-center flex-wrap justify-content-around"},k={class:"mb-2"},I={class:"mb-1"},x={class:"mb-3"},y=["onClick"];function L(e,t,o,P,l,i){return n(),r("div",v,[b,s("ul",E,[(n(!0),r(h,null,_(l.palestre,a=>(n(),r("li",{key:a,style:{"margin-right":"50px!important"},class:"d-flex align-items-center justify-content-center flex-column"},[s("h3",k,c(a.nome),1),s("p",I,c(i.getIndirizzo(a.indirizzo)),1),s("p",x,"Distanza: "+c(i.getDistanza(a.id))+" km",1),s("a",{class:"btn btn-secondary btn-lg active",role:"button","aria-pressed":"true",onClick:N=>i.esplora(a._id)},"Esplora",8,y)]))),128))])])}const O=p(m,[["render",L]]);export{O as default};
